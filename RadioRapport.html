<!-- -->
<!DOCTYPE html>
<!--Språk brukt på nettsiden-->
<html lang="no-NB">
<head>
    <meta charset="UTF-8">

    <!--Tittel på nettsiden-->
    <title>How-We-Roll</title>

    <!--kobler css kode til html dokumentet-->
    <link rel="stylesheet" href="RadioStyle.css">
</head>
<body>

<!--Header på nettsiden-->
<nav><!--navigation section element. Ment for å lettere kunne navigere rundt på nettsiden med linker som tar folk videre.-->
    <div class = "hero">
        <div id="navbar">
            <h1>How-We-Roll</h1> <!--Overskrift i Headeren-->
            <ul>
                <li><a href=RadioFrontside.html> Forside </a></li><!--Link til Frontsiden-->
                <li><a href="RadioInput.html"> Personlighettest </a></li><!--Link til Input siden-->
                <li><a href="RadioRapport.html"> Rapport </a></li><!--Link til Rapprot siden-->
            </ul>
        </div>
    </div>
</nav>
<h1>Side for rapport</h1>

<!--kode hentet fra og modifisert til eget behov: https://github.com/theodorUIA/howweroll.git-->
<!--Output feltene på nettsiden-->
    <div class="main-content">
        <p>Her er en visuell fremstilling av sammenslått gruppe 1A+6B sine innmeldinger i skjema "HowWeRoll". Vi har benyttet SVG-elementer for å vise dataene fra gruppen. </p>
        <p id='localstorage-tekst'></p>
        <h4>Liker du å jobbe i grupper?</h4>
        <svg xmlns="http://www.w3.org/2000/svg" height="75" width="1100" id="LikeJobbeIGrupper-svg" style='border: 1px solid black;'>

            <line x1="50" y1="30" x2="50" y2="1000" style="stroke:rgb(40,158,143);stroke-width:2" /> <!--Linjene i rapport vinduene. Strek for VELDIG UENIG-->
            <line x1="240" y1="30" x2="250" y2="1000" style="stroke:rgb(40,158,143);stroke-width:2" /> <!--Strek for LITT UENIG-->
            <line x1="420" y1="30" x2="420" y2="1000" style="stroke:rgb(40,158,143);stroke-width:2" /> <!--Strek for ENIG-->
            <line x1="630" y1="30" x2="630" y2="1000" style="stroke:rgb(40,158,143);stroke-width:2" /> <!--Strek for LITT ENIG-->
            <line x1="850" y1="30" x2="850" y2="1000" style="stroke:rgb(40,158,143);stroke-width:2" /> <!--Strek for VELDIG ENIG-->
            <line x1="1040" y1="30" x2="1040" y2="1000" style="stroke:rgb(40,158,143);stroke-width:2" /> <!--Strek for NØYTRAL-->
            <rect width="1100px" height="30px" fill="#264653"/> <!--Topplinje rapport vinduet-->
            <g font-size="15" font-family="sans-serif" fill="white" stroke="none">
                <text x="10" y="20" dx="0">VELDIG UENIG</text>
                <text x="200" y="20" dx="0">LITT UENIG</text>
                <text x="400" y="20" dx="0">ENIG</text>
                <text x="600" y="20" dx="0">LITT ENIG</text>
                <text x="800" y="20" dx="0">VELDIG ENIG</text>
                <text x="1000" y="20" dx="0">NØYTRAL</text>
            </g>
        </svg>

        <h4>Liker du å jobbe i grupper?</h4>
        <svg xmlns="http://www.w3.org/2000/svg" height="75" width="1100" id="likeJobbeOmMorgen-svg" style='border: 1px solid black;'>

            <line x1="50" y1="30" x2="50" y2="1000" style="stroke:rgb(40,158,143);stroke-width:2" /> <!--Linjene i rapport vinduene. Strek for VELDIG UENIG-->
            <line x1="240" y1="30" x2="250" y2="1000" style="stroke:rgb(40,158,143);stroke-width:2" /> <!--Strek for LITT UENIG-->
            <line x1="420" y1="30" x2="420" y2="1000" style="stroke:rgb(40,158,143);stroke-width:2" /> <!--Strek for ENIG-->
            <line x1="630" y1="30" x2="630" y2="1000" style="stroke:rgb(40,158,143);stroke-width:2" /> <!--Strek for LITT ENIG-->
            <line x1="850" y1="30" x2="850" y2="1000" style="stroke:rgb(40,158,143);stroke-width:2" /> <!--Strek for VELDIG ENIG-->
            <line x1="1040" y1="30" x2="1040" y2="1000" style="stroke:rgb(40,158,143);stroke-width:2" /> <!--Strek for NØYTRAL-->
            <rect width="1100px" height="30px" fill="#264653"/> <!--Topplinje rapport vinduet-->
            <g font-size="15" font-family="sans-serif" fill="white" stroke="none">
                <text x="10" y="20" dx="0">VELDIG UENIG</text>
                <text x="200" y="20" dx="0">LITT UENIG</text>
                <text x="400" y="20" dx="0">ENIG</text>
                <text x="600" y="20" dx="0">LITT ENIG</text>
                <text x="800" y="20" dx="0">VELDIG ENIG</text>
                <text x="1000" y="20" dx="0">NØYTRAL</text>
            </g>
        </svg>
    </div>
    <!-------------------------------------------------------------------------------------------------------------------->
    <!--Javascript-->
    <script>
        //Funksjon for å plassere navn på SVG-demo. Trenger en tall-verdi (value), en farge (color) og element-id til SVG (svgID)
        function drawSvgText(value, color, svgID, name) {
            const svg = document.getElementById(svgID); //Setter SVG-element basert på svgID
            const svgns = "http://www.w3.org/2000/svg"; //
            let xVal = (parseInt(value) * 10) + 50; //Ganger verdien med 10 for å tegne inn i SVG-elementet som er 1000px bredt
            //Sjekker om verdien er høyere eller lavere enn 500 for å få øke avstanden mellom punktene, samt sette den totale høyden på SVG-elementet
            if (xVal < 500) {
                svgHeightLeft = svgHeightLeft + 50; //Legger til 35 px til venstre-side
                svgYvalue = svgHeightLeft; //Setter Y-verdi til den oppdaterte venstre-side verdien
            } else {
                svgHeightRight = svgHeightRight + 50; //Legger til 35 px til høyre-side
                svgYvalue = svgHeightRight; //Setter Y-verdu til den oppdaterte høyre-side verdien
            }
            //Sjekker om verdien er 0 eller 1000. Legger til eller trekker fra 50px for å unngå at punktene kommer helt ut i kanten på SVG-elementet
            //if(xVal == 0) { xVal = xVal + 50; } //Verdien er 0 og det legges til 50px
            //if(xVal == 1000) { xVal = xVal - 50; } //Verdien er 1000, og det trekkes fra 50px
            let txtName = document.createElementNS(svgns, 'text'); //Oppretter variabel for å vise navn som SVG
            txtName.setAttributeNS(null, 'x', xVal); //Setter x-verdi for navn-objektet
            txtName.setAttributeNS(null, 'y', svgYvalue); //Setter y-verdi for navn-objektet
            txtName.setAttributeNS(null, 'class', 'svg-text svg-animation'); //Knytter css-klassen svg-text til navn-objektet
            txtName.textContent = name; //Setter verdien på tekst-elementet, herunder variablenen "name"
            let circle = document.createElementNS(svgns, "circle"); //Oppretter variabel for å vise en sirkel i SVG-elementet
            circle.setAttributeNS(null, 'cx', xVal); //Setter x-verdi
            circle.setAttributeNS(null, 'cy', svgYvalue); //Setter y-verdi
            circle.setAttributeNS(null, 'r', 25); //Setter radius på sirkelen
            circle.setAttributeNS(null, 'style', 'fill: ' + color); //Setter farge på sirkelen
            circle.setAttributeNS(null, 'class', 'svg-animation svg-shadow');
            let txtValue = document.createElementNS(svgns, 'text');
            txtValue.setAttributeNS(null, 'x', xVal);
            txtValue.setAttributeNS(null, 'y', svgYvalue + 15);
            txtValue.setAttributeNS(null, 'class', 'svg-num svg-animation');
            txtValue.textContent = value;
            //Legger til sirkelen til svg-elementet
            svg.appendChild(circle);
            svg.appendChild(txtName);
            svg.appendChild(txtValue);
        }
        svgYvalue = 0; //Totalhøyde på SVG-elementet
        svgHeightLeft = 25; //Høyde på venstre-side i SVG-elementet
        svgHeightRight = 25; //Høyde på høyre-side i SVG-elementet
        //Legger alle URLene til filene inn i et array (urls)
        let urls = [
            'https://bacit.info/hwr/20221104120925-2998d7d9444e51acfaa63e87f39947e8.json', //https://bacit.info/hwr/time-trxid.json
            'https://bacit.info/hwr/20211001094058-34dc0beed53ce17dd663f6e087108c9d.json',
            'https://bacit.info/hwr/20211001094058-34dc0beed53ce17dd663f6e087108c9d.json',
            'https://bacit.info/hwr/20211001094058-34dc0beed53ce17dd663f6e087108c9d.json',
            'https://bacit.info/hwr/20211001094058-34dc0beed53ce17dd663f6e087108c9d.json',
            'https://bacit.info/hwr/20211001094058-34dc0beed53ce17dd663f6e087108c9d.json',
            'https://bacit.info/hwr/20211001094058-34dc0beed53ce17dd663f6e087108c9d.json',
            'https://bacit.info/hwr/20211001094058-34dc0beed53ce17dd663f6e087108c9d.json',
        ]
        //Sjekker om noen har fylt ut profil-siden og det ligger data i local storage.
        if (localStorage.trxid) {
            let last_trxid = localStorage.getItem("trxid");
            let last_time = localStorage.getItem("time");
            urls.push('https://bacit.info/hwr/' + last_time + '-' + last_trxid + '.json'); //Legger til URL til urls array ved å bruke funksjonen push()
        }
        //Legger alle URLer i en promise.all funksjon
        Promise.all(urls.map(url => fetch(url).then(response => response.json()))).then((data) => {
            //Henter ut data for hver enkelt person i en egen variabel/array for å gjøre oversikten i koden bedre. Hadde det vært et dynamisk system så hadde ikke dette vært nødvendig/mulig
            let simon = data[0];
            let sofia = data[1];
            let sultan = data[2];
            let viktor = data[3];
            let adjin = data[4];
            let william = data[5];
            //Sjekker om det er lagret noe i local storage, og skriver eventuelt ut en melding til <p>-elementet med ID "localstorage-tekst" hvor fornavn og etternavn blir synlig.
            if (localStorage.trxid) {
                document.getElementById("localstorage-tekst").innerHTML = "Takk for at du fylte ut din profil <b>" + data[8].name + " " + data[8].lname + "</b>. Nedefor kan du se hvordan du passer inn i gruppen:";
            }
            //Setter variablene for Y verdi av innholdet i dette SVG-elementet
            svgYvalue = 0; //Totalhøyde på SVG-elementet
            svgHeightLeft = 25; //Høyde på venstre-side i SVG-elementet
            svgHeightRight = 25; //Høyde på høyre-side i SVG-elementet
            //Bruker funksjonen drawSvgText til å generere svg-elementene til LikeJobbeIGrupper-svg
            drawSvgText(simon.LikeJobbeIGrupper, "#b9b9b9", "LikeJobbeIGrupper-svg", simon.name);
            drawSvgText(simon.LikeJobbeIGrupper, "#7dcc6f", "LikeJobbeIGrupper-svg", simon.name);
            drawSvgText(simon.LikeJobbeIGrupper, "#8fdeff", "LikeJobbeIGrupper-svg", simon.name);
            drawSvgText(simon.LikeJobbeIGrupper, "#c9b82e", "LikeJobbeIGrupper-svg", simon.name);
            drawSvgText(simon.LikeJobbeIGrupper, "#eea241", "LikeJobbeIGrupper-svg", simon.name);
            drawSvgText(simon.LikeJobbeIGrupper, "#8f62e1", "LikeJobbeIGrupper-svg", simon.name);
            if (localStorage.trxid)
            {
                drawSvgText(data[8].LikeJobbeIGrupper, "#e36256", "LikeJobbeIGrupper-svg", data[8].name);
            }
            //Sjekker hvilken side som er høyest, og bruker deretter den høyeste til å sette "height" på SVG-elementet LikeJobbeIGrupper-svg
            if (svgHeightRight < svgHeightLeft) {
                svgYvalue = svgHeightLeft; //Venstre side er høyest
            } else {
                svgYvalue = svgHeightRight; //Høyre side er høyest
            }
            //Endrer høyden på SVG-elementet
            document.getElementById('LikeJobbeIGrupper-svg').setAttribute("height", svgYvalue + 40);
                //Setter variablene for Y verdi av innholdet i dette SVG-elementet
                svgYvalue = 0; //Totalhøyde på SVG-elementet
                svgHeightLeft = 25; //Høyde på venstre-side i SVG-elementet
                svgHeightRight = 25; //Høyde på høyre-side i SVG-elementet
                //Bruker funksjonen drawSvgText til å generere svg-elementene til LikeJobbeIGrupper-svg
                drawSvgText(simon.LikeJobbeIGrupper, "#b9b9b9", "LikeJobbeIGrupper-svg", simon.name);
                drawSvgText(simon.LikeJobbeIGrupper, "#7dcc6f", "LikeJobbeIGrupper-svg", simon.name);
                drawSvgText(simon.LikeJobbeIGrupper, "#8fdeff", "LikeJobbeIGrupper-svg", simon.name);
                drawSvgText(simon.LikeJobbeIGrupper, "#c9b82e", "LikeJobbeIGrupper-svg", simon.name);
                drawSvgText(simon.LikeJobbeIGrupper, "#eea241", "LikeJobbeIGrupper-svg", simon.name);
                drawSvgText(simon.LikeJobbeIGrupper, "#8f62e1", "LikeJobbeIGrupper-svg", simon.name);
                if (localStorage.trxid)
                {
                    drawSvgText(data[8].LikeJobbeIGrupper, "#e36256", "LikeJobbeIGrupper-svg", data[8].name);
                }
                //Sjekker hvilken side som er høyest, og bruker deretter den høyeste til å sette "height" på SVG-elementet LikeJobbeIGrupper-svg
                if (svgHeightRight < svgHeightLeft) {
                    svgYvalue = svgHeightLeft; //Venstre side er høyest
                } else {
                    svgYvalue = svgHeightRight; //Høyre side er høyest
                }
                //Endrer høyden på SVG-elementet
                document.getElementById('likeJobbeOmMorgen-svg').setAttribute("height", svgYvalue + 40);

                //Setter variablene for Y verdi av innholdet i dette SVG-elementet
                svgYvalue = 0; //Totalhøyde på SVG-elementet
                svgHeightLeft = 25; //Høyde på venstre-side i SVG-elementet
                svgHeightRight = 25; //Høyde på høyre-side i SVG-elementet
                //Bruker funksjonen drawSvgText til å generere svg-elementene til LikeJobbeIGrupper-svg
                drawSvgText(simon.likeJobbeOmMorgen, "#b9b9b9", "likeJobbeOmMorgen-svg", simon.name);
                drawSvgText(simon.likeJobbeOmMorgen, "#7dcc6f", "likeJobbeOmMorgen-svg", simon.name);
                drawSvgText(simon.likeJobbeOmMorgen, "#8fdeff", "likeJobbeOmMorgen-svg", simon.name);
                drawSvgText(simon.likeJobbeOmMorgen, "#c9b82e", "likeJobbeOmMorgen-svg", simon.name);
                drawSvgText(simon.likeJobbeOmMorgen, "#eea241", "likeJobbeOmMorgen-svg", simon.name);
                drawSvgText(simon.likeJobbeOmMorgen, "#8f62e1", "likeJobbeOmMorgen-svg", simon.name);
                if (localStorage.trxid)
                {
                    drawSvgText(data[8].likeJobbeOmMorgen, "#e36256", "likeJobbeOmMorgen-svg", data[8].name);
                }
                //Sjekker hvilken side som er høyest, og bruker deretter den høyeste til å sette "height" på SVG-elementet likeJobbeOmMorgen-svg
                if (svgHeightRight < svgHeightLeft) {
                    svgYvalue = svgHeightLeft; //Venstre side er høyest
                } else {
                    svgYvalue = svgHeightRight; //Høyre side er høyest
                }
                //Endrer høyden på SVG-elementet
                document.getElementById('likeJobbeOmMorgen-svg').setAttribute("height", svgYvalue + 40);
        }
        )
</script>

</body>
</html>